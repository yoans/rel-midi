{"ast":null,"code":"var _jsxFileName = \"C:\\\\bench\\\\rel-midi\\\\src\\\\MidiController.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useSynth } from './SynthEngine';\nimport Keyboard from './components/Keyboard';\nimport Controls from './components/Controls';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NOTE_NAMES = ['C', 'C♯', 'D', 'D♯', 'E', 'F', 'F♯', 'G', 'G♯', 'A', 'A♯', 'B'];\nconst getNoteName = midi => `${NOTE_NAMES[midi % 12]}${Math.floor(midi / 12) - 1}`;\nconst KEY_MAP = {\n  'a': -4,\n  's': -3,\n  'd': -2,\n  'f': -1,\n  ' ': 0,\n  'j': 1,\n  'k': 2,\n  'l': 3,\n  ';': 4\n};\nconst KEY_LABELS = [{\n  key: 'A',\n  interval: -4\n}, {\n  key: 'S',\n  interval: -3\n}, {\n  key: 'D',\n  interval: -2\n}, {\n  key: 'F',\n  interval: -1\n}, {\n  key: 'SPACE',\n  interval: 0,\n  isSpace: true\n}, {\n  key: 'J',\n  interval: +1\n}, {\n  key: 'K',\n  interval: +2\n}, {\n  key: 'L',\n  interval: +3\n}, {\n  key: ';',\n  interval: +4\n}];\nfunction MidiController() {\n  _s();\n  const {\n    playNote,\n    stopNote,\n    settings,\n    updateSetting\n  } = useSynth();\n  const [midiOutputs, setMidiOutputs] = useState([]);\n  const [selectedOutput, setSelectedOutput] = useState(null);\n  const [currentNote, setCurrentNote] = useState(60);\n  const [activeNotes, setActiveNotes] = useState([]);\n  const [noteHistory, setNoteHistory] = useState([{\n    note: 60,\n    time: Date.now()\n  }]);\n  const [pressedKey, setPressedKey] = useState(null);\n  const [lastInterval, setLastInterval] = useState(null);\n  const [showControls, setShowControls] = useState(false);\n  const currentNoteRef = useRef(60);\n  useEffect(() => {\n    currentNoteRef.current = currentNote;\n  }, [currentNote]);\n\n  // MIDI Access\n  useEffect(() => {\n    const getMIDIAccess = async () => {\n      try {\n        const access = await navigator.requestMIDIAccess();\n        const outputs = Array.from(access.outputs.values());\n        setMidiOutputs(outputs);\n        if (outputs.length > 0) setSelectedOutput(outputs[0].id);\n      } catch (err) {\n        console.warn('MIDI access not available:', err);\n      }\n    };\n    getMIDIAccess();\n  }, []);\n  const triggerNote = useCallback((note, velocity = 100) => {\n    setActiveNotes([note]);\n    playNote(note);\n    if (selectedOutput) {\n      navigator.requestMIDIAccess().then(access => {\n        const output = access.outputs.get(selectedOutput);\n        if (output) {\n          output.send([0x90, note, velocity]);\n          setTimeout(() => {\n            output.send([0x80, note, 0]);\n            stopNote(note);\n            setActiveNotes([]);\n          }, 400);\n        }\n      });\n    } else {\n      setTimeout(() => {\n        stopNote(note);\n        setActiveNotes([]);\n      }, 400);\n    }\n  }, [playNote, stopNote, selectedOutput]);\n\n  // Keyboard handler\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (e.repeat) return;\n      const interval = KEY_MAP[e.key.toLowerCase()];\n      if (interval !== undefined) {\n        e.preventDefault();\n        const label = e.key === ' ' ? 'SPACE' : e.key.toUpperCase();\n        setPressedKey(label);\n        setLastInterval(interval);\n        const newNote = Math.max(0, Math.min(127, currentNoteRef.current + interval));\n        setCurrentNote(newNote);\n        setNoteHistory(prev => [...prev.slice(-15), {\n          note: newNote,\n          time: Date.now()\n        }]);\n        triggerNote(newNote);\n      }\n    };\n    const handleKeyUp = e => {\n      const interval = KEY_MAP[e.key.toLowerCase()];\n      if (interval !== undefined) {\n        setPressedKey(null);\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [triggerNote]);\n  const handleVisualKeyClick = note => {\n    const interval = note - currentNote;\n    setLastInterval(interval);\n    setCurrentNote(note);\n    setNoteHistory(prev => [...prev.slice(-15), {\n      note,\n      time: Date.now()\n    }]);\n    triggerNote(note);\n  };\n  const jumpOctave = direction => {\n    const newNote = Math.max(0, Math.min(127, currentNote + direction * 12));\n    setCurrentNote(newNote);\n    setLastInterval(direction * 12);\n    setNoteHistory(prev => [...prev.slice(-15), {\n      note: newNote,\n      time: Date.now()\n    }]);\n    triggerNote(newNote);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"synth-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"synth-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"REL-MIDI\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"subtitle\",\n        children: \"Relative Interval Controller\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"note-display\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"octave-btn\",\n        onClick: () => jumpOctave(-1),\n        title: \"Octave Down\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"octave-arrow\",\n          children: \"\\u25C2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"octave-label\",\n          children: \"OCT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"note-display-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"note-name\",\n          children: getNoteName(currentNote)\n        }, currentNote, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"note-midi\",\n          children: [\"MIDI \", currentNote]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), lastInterval !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `interval-indicator ${lastInterval > 0 ? 'pos' : lastInterval < 0 ? 'neg' : 'zero'}`,\n          children: lastInterval > 0 ? `+${lastInterval}` : lastInterval === 0 ? '●' : lastInterval\n        }, `${lastInterval}-${Date.now()}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"octave-btn\",\n        onClick: () => jumpOctave(1),\n        title: \"Octave Up\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"octave-label\",\n          children: \"OCT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"octave-arrow\",\n          children: \"\\u25B8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"note-history\",\n      children: noteHistory.map((entry, i) => {\n        const isCurrent = i === noteHistory.length - 1;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `history-note ${isCurrent ? 'current' : ''}`,\n          style: {\n            opacity: 0.25 + i / noteHistory.length * 0.75\n          },\n          children: getNoteName(entry.note)\n        }, `${entry.time}-${i}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"key-hints-bar\",\n      children: KEY_LABELS.map(({\n        key,\n        interval,\n        isSpace\n      }) => {\n        const targetNote = Math.max(0, Math.min(127, currentNote + interval));\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: ['key-btn', isSpace ? 'space' : '', interval < 0 ? 'neg' : interval > 0 ? 'pos' : 'zero', pressedKey === key ? 'pressed' : ''].filter(Boolean).join(' '),\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"key-cap\",\n            children: key\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"key-interval\",\n            children: interval > 0 ? `+${interval}` : interval === 0 ? 'RPT' : interval\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"key-target\",\n            children: getNoteName(targetNote)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Keyboard, {\n      activeNotes: activeNotes,\n      onNoteOn: handleVisualKeyClick,\n      onNoteOff: () => {},\n      currentNote: currentNote\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"controls-toggle\",\n      onClick: () => setShowControls(!showControls),\n      children: showControls ? '▾ Hide Synth Controls' : '▸ Synth Controls'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `controls-wrapper ${showControls ? 'open' : ''}`,\n      children: /*#__PURE__*/_jsxDEV(Controls, {\n        settings: settings,\n        updateSetting: updateSetting,\n        midiOutputs: midiOutputs,\n        selectedOutput: selectedOutput,\n        setSelectedOutput: setSelectedOutput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n}\n_s(MidiController, \"3u7pMXO1D1uFgiWcos+JF5tO0gg=\", false, function () {\n  return [useSynth];\n});\n_c = MidiController;\nexport default MidiController;\nvar _c;\n$RefreshReg$(_c, \"MidiController\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","useSynth","Keyboard","Controls","jsxDEV","_jsxDEV","NOTE_NAMES","getNoteName","midi","Math","floor","KEY_MAP","KEY_LABELS","key","interval","isSpace","MidiController","_s","playNote","stopNote","settings","updateSetting","midiOutputs","setMidiOutputs","selectedOutput","setSelectedOutput","currentNote","setCurrentNote","activeNotes","setActiveNotes","noteHistory","setNoteHistory","note","time","Date","now","pressedKey","setPressedKey","lastInterval","setLastInterval","showControls","setShowControls","currentNoteRef","current","getMIDIAccess","access","navigator","requestMIDIAccess","outputs","Array","from","values","length","id","err","console","warn","triggerNote","velocity","then","output","get","send","setTimeout","handleKeyDown","e","repeat","toLowerCase","undefined","preventDefault","label","toUpperCase","newNote","max","min","prev","slice","handleKeyUp","window","addEventListener","removeEventListener","handleVisualKeyClick","jumpOctave","direction","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","map","entry","i","isCurrent","style","opacity","targetNote","filter","Boolean","join","onNoteOn","onNoteOff","_c","$RefreshReg$"],"sources":["C:/bench/rel-midi/src/MidiController.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { useSynth } from './SynthEngine';\r\nimport Keyboard from './components/Keyboard';\r\nimport Controls from './components/Controls';\r\n\r\nconst NOTE_NAMES = ['C', 'C♯', 'D', 'D♯', 'E', 'F', 'F♯', 'G', 'G♯', 'A', 'A♯', 'B'];\r\nconst getNoteName = (midi) => `${NOTE_NAMES[midi % 12]}${Math.floor(midi / 12) - 1}`;\r\n\r\nconst KEY_MAP = {\r\n  'a': -4, 's': -3, 'd': -2, 'f': -1,\r\n  ' ': 0,\r\n  'j': 1, 'k': 2, 'l': 3, ';': 4,\r\n};\r\n\r\nconst KEY_LABELS = [\r\n  { key: 'A', interval: -4 },\r\n  { key: 'S', interval: -3 },\r\n  { key: 'D', interval: -2 },\r\n  { key: 'F', interval: -1 },\r\n  { key: 'SPACE', interval: 0, isSpace: true },\r\n  { key: 'J', interval: +1 },\r\n  { key: 'K', interval: +2 },\r\n  { key: 'L', interval: +3 },\r\n  { key: ';', interval: +4 },\r\n];\r\n\r\nfunction MidiController() {\r\n  const { playNote, stopNote, settings, updateSetting } = useSynth();\r\n  const [midiOutputs, setMidiOutputs] = useState([]);\r\n  const [selectedOutput, setSelectedOutput] = useState(null);\r\n  const [currentNote, setCurrentNote] = useState(60);\r\n  const [activeNotes, setActiveNotes] = useState([]);\r\n  const [noteHistory, setNoteHistory] = useState([{ note: 60, time: Date.now() }]);\r\n  const [pressedKey, setPressedKey] = useState(null);\r\n  const [lastInterval, setLastInterval] = useState(null);\r\n  const [showControls, setShowControls] = useState(false);\r\n\r\n  const currentNoteRef = useRef(60);\r\n\r\n  useEffect(() => {\r\n    currentNoteRef.current = currentNote;\r\n  }, [currentNote]);\r\n\r\n  // MIDI Access\r\n  useEffect(() => {\r\n    const getMIDIAccess = async () => {\r\n      try {\r\n        const access = await navigator.requestMIDIAccess();\r\n        const outputs = Array.from(access.outputs.values());\r\n        setMidiOutputs(outputs);\r\n        if (outputs.length > 0) setSelectedOutput(outputs[0].id);\r\n      } catch (err) {\r\n        console.warn('MIDI access not available:', err);\r\n      }\r\n    };\r\n    getMIDIAccess();\r\n  }, []);\r\n\r\n  const triggerNote = useCallback((note, velocity = 100) => {\r\n    setActiveNotes([note]);\r\n    playNote(note);\r\n\r\n    if (selectedOutput) {\r\n      navigator.requestMIDIAccess().then(access => {\r\n        const output = access.outputs.get(selectedOutput);\r\n        if (output) {\r\n          output.send([0x90, note, velocity]);\r\n          setTimeout(() => {\r\n            output.send([0x80, note, 0]);\r\n            stopNote(note);\r\n            setActiveNotes([]);\r\n          }, 400);\r\n        }\r\n      });\r\n    } else {\r\n      setTimeout(() => {\r\n        stopNote(note);\r\n        setActiveNotes([]);\r\n      }, 400);\r\n    }\r\n  }, [playNote, stopNote, selectedOutput]);\r\n\r\n  // Keyboard handler\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (e.repeat) return;\r\n      const interval = KEY_MAP[e.key.toLowerCase()];\r\n      if (interval !== undefined) {\r\n        e.preventDefault();\r\n        const label = e.key === ' ' ? 'SPACE' : e.key.toUpperCase();\r\n        setPressedKey(label);\r\n        setLastInterval(interval);\r\n\r\n        const newNote = Math.max(0, Math.min(127, currentNoteRef.current + interval));\r\n        setCurrentNote(newNote);\r\n        setNoteHistory(prev => [...prev.slice(-15), { note: newNote, time: Date.now() }]);\r\n        triggerNote(newNote);\r\n      }\r\n    };\r\n\r\n    const handleKeyUp = (e) => {\r\n      const interval = KEY_MAP[e.key.toLowerCase()];\r\n      if (interval !== undefined) {\r\n        setPressedKey(null);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    window.addEventListener('keyup', handleKeyUp);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n      window.removeEventListener('keyup', handleKeyUp);\r\n    };\r\n  }, [triggerNote]);\r\n\r\n  const handleVisualKeyClick = (note) => {\r\n    const interval = note - currentNote;\r\n    setLastInterval(interval);\r\n    setCurrentNote(note);\r\n    setNoteHistory(prev => [...prev.slice(-15), { note, time: Date.now() }]);\r\n    triggerNote(note);\r\n  };\r\n\r\n  const jumpOctave = (direction) => {\r\n    const newNote = Math.max(0, Math.min(127, currentNote + direction * 12));\r\n    setCurrentNote(newNote);\r\n    setLastInterval(direction * 12);\r\n    setNoteHistory(prev => [...prev.slice(-15), { note: newNote, time: Date.now() }]);\r\n    triggerNote(newNote);\r\n  };\r\n\r\n  return (\r\n    <div className=\"synth-container\">\r\n      <header className=\"synth-header\">\r\n        <h1>REL-MIDI</h1>\r\n        <p className=\"subtitle\">Relative Interval Controller</p>\r\n      </header>\r\n\r\n      {/* Note Display */}\r\n      <div className=\"note-display\">\r\n        <button className=\"octave-btn\" onClick={() => jumpOctave(-1)} title=\"Octave Down\">\r\n          <span className=\"octave-arrow\">◂</span>\r\n          <span className=\"octave-label\">OCT</span>\r\n        </button>\r\n        <div className=\"note-display-center\">\r\n          <div className=\"note-name\" key={currentNote}>{getNoteName(currentNote)}</div>\r\n          <div className=\"note-midi\">MIDI {currentNote}</div>\r\n          {lastInterval !== null && (\r\n            <div\r\n              key={`${lastInterval}-${Date.now()}`}\r\n              className={`interval-indicator ${lastInterval > 0 ? 'pos' : lastInterval < 0 ? 'neg' : 'zero'}`}\r\n            >\r\n              {lastInterval > 0 ? `+${lastInterval}` : lastInterval === 0 ? '●' : lastInterval}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <button className=\"octave-btn\" onClick={() => jumpOctave(1)} title=\"Octave Up\">\r\n          <span className=\"octave-label\">OCT</span>\r\n          <span className=\"octave-arrow\">▸</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Note History */}\r\n      <div className=\"note-history\">\r\n        {noteHistory.map((entry, i) => {\r\n          const isCurrent = i === noteHistory.length - 1;\r\n          return (\r\n            <div\r\n              key={`${entry.time}-${i}`}\r\n              className={`history-note ${isCurrent ? 'current' : ''}`}\r\n              style={{ opacity: 0.25 + (i / noteHistory.length) * 0.75 }}\r\n            >\r\n              {getNoteName(entry.note)}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Key Hints */}\r\n      <div className=\"key-hints-bar\">\r\n        {KEY_LABELS.map(({ key, interval, isSpace }) => {\r\n          const targetNote = Math.max(0, Math.min(127, currentNote + interval));\r\n          return (\r\n            <div\r\n              key={key}\r\n              className={[\r\n                'key-btn',\r\n                isSpace ? 'space' : '',\r\n                interval < 0 ? 'neg' : interval > 0 ? 'pos' : 'zero',\r\n                pressedKey === key ? 'pressed' : '',\r\n              ].filter(Boolean).join(' ')}\r\n            >\r\n              <span className=\"key-cap\">{key}</span>\r\n              <span className=\"key-interval\">\r\n                {interval > 0 ? `+${interval}` : interval === 0 ? 'RPT' : interval}\r\n              </span>\r\n              <span className=\"key-target\">{getNoteName(targetNote)}</span>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Piano */}\r\n      <Keyboard\r\n        activeNotes={activeNotes}\r\n        onNoteOn={handleVisualKeyClick}\r\n        onNoteOff={() => {}}\r\n        currentNote={currentNote}\r\n      />\r\n\r\n      {/* Collapsible Controls */}\r\n      <button\r\n        className=\"controls-toggle\"\r\n        onClick={() => setShowControls(!showControls)}\r\n      >\r\n        {showControls ? '▾ Hide Synth Controls' : '▸ Synth Controls'}\r\n      </button>\r\n      <div className={`controls-wrapper ${showControls ? 'open' : ''}`}>\r\n        <Controls\r\n          settings={settings}\r\n          updateSetting={updateSetting}\r\n          midiOutputs={midiOutputs}\r\n          selectedOutput={selectedOutput}\r\n          setSelectedOutput={setSelectedOutput}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MidiController;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}